<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Julius Fenn, Paul Sölder">

<title>Data preperation part II of basal attributes article</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="01_dataPreperation_files/libs/clipboard/clipboard.min.js"></script>
<script src="01_dataPreperation_files/libs/quarto-html/quarto.js"></script>
<script src="01_dataPreperation_files/libs/quarto-html/popper.min.js"></script>
<script src="01_dataPreperation_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="01_dataPreperation_files/libs/quarto-html/anchor.min.js"></script>
<link href="01_dataPreperation_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="01_dataPreperation_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="01_dataPreperation_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="01_dataPreperation_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="01_dataPreperation_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="01_dataPreperation_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="01_dataPreperation_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="01_dataPreperation_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="01_dataPreperation_files/libs/datatables-binding-0.33/datatables.js"></script>

<script src="01_dataPreperation_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="01_dataPreperation_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="01_dataPreperation_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="01_dataPreperation_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="01_dataPreperation_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="01_dataPreperation_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>



</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#notes" id="toc-notes" class="nav-link active" data-scroll-target="#notes"><span class="header-section-number">1</span> Notes</a></li>
  <li><a href="#global-variables" id="toc-global-variables" class="nav-link" data-scroll-target="#global-variables"><span class="header-section-number">2</span> global variables</a></li>
  <li><a href="#create-raw-data-files" id="toc-create-raw-data-files" class="nav-link" data-scroll-target="#create-raw-data-files"><span class="header-section-number">3</span> create raw data files</a></li>
  <li><a href="#set-up-data.frame-questionnaires" id="toc-set-up-data.frame-questionnaires" class="nav-link" data-scroll-target="#set-up-data.frame-questionnaires"><span class="header-section-number">4</span> set up data.frame questionnaires</a></li>
  <li><a href="#get-reaction-times-for-single-components" id="toc-get-reaction-times-for-single-components" class="nav-link" data-scroll-target="#get-reaction-times-for-single-components"><span class="header-section-number">5</span> get reaction times for single components</a></li>
  <li><a href="#add-socio-demographic-data" id="toc-add-socio-demographic-data" class="nav-link" data-scroll-target="#add-socio-demographic-data"><span class="header-section-number">6</span> add socio-demographic data</a>
  <ul class="collapse">
  <li><a href="#describe-sample" id="toc-describe-sample" class="nav-link" data-scroll-target="#describe-sample"><span class="header-section-number">6.1</span> Describe sample</a></li>
  </ul></li>
  <li><a href="#set-up-cam-data" id="toc-set-up-cam-data" class="nav-link" data-scroll-target="#set-up-cam-data"><span class="header-section-number">7</span> set up CAM data</a>
  <ul class="collapse">
  <li><a href="#plot-cams-using-igraph-package" id="toc-plot-cams-using-igraph-package" class="nav-link" data-scroll-target="#plot-cams-using-igraph-package"><span class="header-section-number">7.1</span> plot CAMs using igraph package</a></li>
  <li><a href="#save-cams-as-.json-files-and-as-.png-igraph" id="toc-save-cams-as-.json-files-and-as-.png-igraph" class="nav-link" data-scroll-target="#save-cams-as-.json-files-and-as-.png-igraph"><span class="header-section-number">7.2</span> save CAMs as .json files, and as .png (igraph)</a></li>
  <li><a href="#delete-cams-with-star-topology" id="toc-delete-cams-with-star-topology" class="nav-link" data-scroll-target="#delete-cams-with-star-topology"><span class="header-section-number">7.3</span> delete CAMs with star topology</a></li>
  <li><a href="#aggregate-cams" id="toc-aggregate-cams" class="nav-link" data-scroll-target="#aggregate-cams"><span class="header-section-number">7.4</span> aggregate CAMs</a></li>
  </ul></li>
  <li><a href="#save-all-final-files" id="toc-save-all-final-files" class="nav-link" data-scroll-target="#save-all-final-files"><span class="header-section-number">8</span> save all final files</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data preperation part II of basal attributes article</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Julius Fenn, Paul Sölder </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="notes" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Notes</h1>
</section>
<section id="global-variables" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> global variables</h1>
<p>Define your global variables (can take some time to run):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>save_CAMs_as_pictures <span class="ot">=</span> <span class="cn">TRUE</span> <span class="co"># TRUE = save CAMs as .json, .png files</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>plot_deleted_CAMs <span class="ot">=</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-raw-data-files" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> create raw data files</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sets the directory of location of this script as the current directory</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># setwd(dirname(rstudioapi::getSourceEditorContext()$path))</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="do">### load packages</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github('jdwilson4/multilayer_extraction')</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(pacman)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(<span class="st">'tidyverse'</span>, <span class="st">'jsonlite'</span>, <span class="st">'magrittr'</span>, <span class="st">'xlsx'</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>       <span class="st">'stargazer'</span>, <span class="st">'psych'</span>, <span class="st">'jtools'</span>, <span class="st">'DT'</span>, <span class="st">'ggstatsplot'</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>       <span class="st">'lavaan'</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>       <span class="st">'regsem'</span>, <span class="st">'MplusAutomation'</span>, <span class="st">'igraph'</span>, <span class="st">'ggplot2'</span>, <span class="st">'tidyLPA'</span>, <span class="st">'MultilayerExtraction'</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>       <span class="st">'Matrix'</span>, <span class="st">'igraph'</span>, <span class="st">'foreach'</span>, <span class="st">'doParallel'</span>, <span class="st">'parallel'</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>       <span class="st">'R.matlab'</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="do">### load socio-demographic data</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"data demographic"</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>prolific <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"prolific_export_65d4744b1373145896174eba.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"../data final list basal attributes"</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>listBasalAttributes <span class="ot">&lt;-</span> <span class="fu">read.xlsx2</span>(<span class="at">file =</span> <span class="st">"final list basal attributes.xlsx"</span>, <span class="at">sheetIndex =</span> <span class="dv">1</span>)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>listBasalAttributes<span class="sc">$</span>German.Translation[listBasalAttributes<span class="sc">$</span>German.Translation <span class="sc">==</span> <span class="st">"bio-inspiriert"</span>] <span class="ot">&lt;-</span> <span class="st">"bioinspiriert"</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>listBasalAttributes<span class="sc">$</span>German.Translation[listBasalAttributes<span class="sc">$</span>German.Translation <span class="sc">==</span> <span class="st">"Energie generierend"</span>] <span class="ot">&lt;-</span> <span class="st">"Energie   generierend"</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>listBasalAttributes<span class="sc">$</span>German.Translation[listBasalAttributes<span class="sc">$</span>German.Translation <span class="sc">==</span> <span class="st">"Energie speichernd"</span>] <span class="ot">&lt;-</span> <span class="st">"Energie   speichernd"</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="do">### list data files</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"../data"</span>)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>folders <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">"^study_result.*"</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="do">### create data files</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="do">### get CAM data</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="st">""</span>, <span class="st">"CAMdata.txt"</span>) <span class="co"># create file</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>text_connection <span class="ot">&lt;-</span> <span class="fu">file</span>(<span class="st">"CAMdata.txt"</span>, <span class="st">"a"</span>) <span class="co"># open connection to append</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="do">### get pre CAM data</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="st">""</span>, <span class="st">"preCAM.txt"</span>) <span class="co"># create file</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>text_connection_pre <span class="ot">&lt;-</span> <span class="fu">file</span>(<span class="st">"preCAM.txt"</span>, <span class="st">"a"</span>) <span class="co"># open connection to append</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="do">### get post CAM data</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="st">""</span>, <span class="st">"postCAM.txt"</span>) <span class="co"># create file</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>text_connection_post <span class="ot">&lt;-</span> <span class="fu">file</span>(<span class="st">"postCAM.txt"</span>, <span class="st">"a"</span>) <span class="co"># open connection to append</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(folders)){</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setwd</span>(folders[i])</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(<span class="fu">dir</span>()) <span class="sc">==</span> <span class="dv">3</span>){</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print(i)</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="do">### CAM data</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setwd</span>(<span class="fu">dir</span>()[<span class="dv">2</span>])</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="at">txt =</span> <span class="st">"data.txt"</span>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">writeLines</span>(jsonlite<span class="sc">::</span><span class="fu">toJSON</span>(<span class="at">x =</span> tmp), text_connection)</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setwd</span>(<span class="st">".."</span>)</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    <span class="do">### pre CAM data</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setwd</span>(<span class="fu">dir</span>()[<span class="dv">1</span>])</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="at">txt =</span> <span class="st">"data.txt"</span>)</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">writeLines</span>(jsonlite<span class="sc">::</span><span class="fu">toJSON</span>(<span class="at">x =</span> tmp), text_connection_pre)</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setwd</span>(<span class="st">".."</span>)</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    <span class="do">### post CAM data</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setwd</span>(<span class="fu">dir</span>()[<span class="dv">3</span>])</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>    tmp <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="at">txt =</span> <span class="st">"data.txt"</span>)</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">writeLines</span>(jsonlite<span class="sc">::</span><span class="fu">toJSON</span>(<span class="at">x =</span> tmp), text_connection_post)</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setwd</span>(<span class="st">".."</span>)</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setwd</span>(<span class="st">".."</span>)</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a><span class="fu">close</span>(text_connection) <span class="co"># close connection CAM</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a><span class="fu">close</span>(text_connection_pre) <span class="co"># close connection</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a><span class="fu">close</span>(text_connection_post) <span class="co"># close connection</span></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a><span class="do">### move files to output folder</span></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a><span class="co"># copy files (not overwritten)</span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>tmp_file_from <span class="ot">&lt;-</span>  <span class="fu">getwd</span>()</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"../outputs/01_dataPreperation"</span>)</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a><span class="fu">file.copy</span>(<span class="at">from =</span>  <span class="fu">paste0</span>(tmp_file_from, <span class="st">"/CAMdata.txt"</span>), <span class="at">to =</span> <span class="fu">paste0</span>(<span class="fu">getwd</span>(), <span class="st">"/CAMdata.txt"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.copy</span>(<span class="at">from =</span>  <span class="fu">paste0</span>(tmp_file_from, <span class="st">"/preCAM.txt"</span>), <span class="at">to =</span> <span class="fu">paste0</span>(<span class="fu">getwd</span>(), <span class="st">"/preCAM.txt"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.copy</span>(<span class="at">from =</span>  <span class="fu">paste0</span>(tmp_file_from, <span class="st">"/postCAM.txt"</span>), <span class="at">to =</span> <span class="fu">paste0</span>(<span class="fu">getwd</span>(), <span class="st">"/postCAM.txt"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">### remove files</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="fu">paste0</span>(tmp_file_from, <span class="st">"/CAMdata.txt"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="fu">paste0</span>(tmp_file_from, <span class="st">"/preCAM.txt"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="fu">paste0</span>(tmp_file_from, <span class="st">"/postCAM.txt"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">### load functions</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"../../functions"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">dir</span>())){</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print(dir()[i])</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">source</span>(<span class="fu">dir</span>()[i], <span class="at">encoding =</span> <span class="st">"utf-8"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"../functions_CAMapp"</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">dir</span>())){</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print(dir()[i])</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">source</span>(<span class="fu">dir</span>()[i], <span class="at">encoding =</span> <span class="st">"utf-8"</span>)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(i)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="do">### summary function</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>data_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(data, varname, groupnames){</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(plyr)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  summary_func <span class="ot">&lt;-</span> <span class="cf">function</span>(x, col){</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="at">mean =</span> <span class="fu">mean</span>(x[[col]], <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">se =</span> <span class="fu">sd</span>(x[[col]], <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">length</span>(x[[col]])))</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>  data_sum<span class="ot">&lt;-</span><span class="fu">ddply</span>(data, groupnames, <span class="at">.fun=</span>summary_func,</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>                  varname)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>  data_sum <span class="ot">&lt;-</span> plyr<span class="sc">::</span><span class="fu">rename</span>(data_sum, <span class="fu">c</span>(<span class="st">"mean"</span> <span class="ot">=</span> varname))</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(data_sum)</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="set-up-data.frame-questionnaires" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> set up data.frame questionnaires</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"outputs/01_dataPreperation"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># &gt; pre study</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressMessages</span>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_file</span>(<span class="st">'preCAM.txt'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... split it into lines ...</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_split</span>(<span class="st">'</span><span class="sc">\n</span><span class="st">'</span>) <span class="sc">%&gt;%</span> <span class="fu">first</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... filter empty rows ...</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">discard</span>(<span class="cf">function</span>(x)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>      x <span class="sc">==</span> <span class="st">''</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">discard</span>(<span class="cf">function</span>(x)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>      x <span class="sc">==</span> <span class="st">'</span><span class="sc">\r</span><span class="st">'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... parse JSON into a data.frame</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map_dfr</span>(fromJSON, <span class="at">flatten =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>) <span class="ot">-&gt;</span> dat_preCAM</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co"># &gt; post CAM</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="fu">read_file</span>(<span class="st">'postCAM.txt'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ... split it into lines ...</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">'</span><span class="sc">\n</span><span class="st">'</span>) <span class="sc">%&gt;%</span> <span class="fu">first</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ... filter empty rows ...</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">discard</span>(<span class="cf">function</span>(x)</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">==</span> <span class="st">''</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">discard</span>(<span class="cf">function</span>(x)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">==</span> <span class="st">'</span><span class="sc">\r</span><span class="st">'</span>) <span class="ot">-&gt;</span> tmp_postCAM</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>tmp_out <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(tmp_postCAM)) {</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>  tmp_out[[i]] <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(tmp_postCAM[i])</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>  tmp_out[[i]]<span class="sc">$</span><span class="st">"21"</span> <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># causes error</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>dat_postCAM <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(tmp_out)</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(tmp_postCAM)</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(tmp_out)</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a><span class="do">### create counter variable for both data sets</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a><span class="co"># &gt; pre study</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>dat_preCAM<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>tmp_IDcounter <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(dat_preCAM)) {</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(dat_preCAM<span class="sc">$</span>sender[i]) <span class="sc">&amp;&amp;</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>      dat_preCAM<span class="sc">$</span>sender[i] <span class="sc">==</span> <span class="st">"Greetings"</span>) {</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tmp &lt;- dat_preCAM$prolific_pid[i]</span></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>    tmp_IDcounter <span class="ot">=</span> tmp_IDcounter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>  dat_preCAM<span class="sc">$</span>ID[i] <span class="ot">&lt;-</span> tmp_IDcounter</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a><span class="co"># &gt; post CAM</span></span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>dat_postCAM<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>tmp_IDcounter <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(dat_postCAM)) {</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(dat_postCAM<span class="sc">$</span>sender[i]) <span class="sc">&amp;&amp;</span></span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>      dat_postCAM<span class="sc">$</span>sender[i] <span class="sc">==</span> <span class="st">"CAMfeedbackGeneral"</span>) {</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tmp &lt;- dat_postCAM$prolific_pid[i]</span></span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>    tmp_IDcounter <span class="ot">=</span> tmp_IDcounter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>  dat_postCAM<span class="sc">$</span>ID[i] <span class="ot">&lt;-</span> tmp_IDcounter</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a><span class="do">### keep only complete data sets</span></span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a><span class="co"># &gt; pre study</span></span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a><span class="co"># sort(table(dat_preCAM$ID))</span></span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">table</span>(dat_preCAM<span class="sc">$</span>ID) <span class="sc">!=</span> <span class="fu">max</span>(<span class="fu">table</span>(dat_preCAM<span class="sc">$</span>ID)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">table</span>(dat_preCAM<span class="sc">$</span>ID) <span class="sc">==</span> <span class="fu">max</span>(<span class="fu">table</span>(dat_preCAM<span class="sc">$</span>ID)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 193</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>dat_preCAM <span class="ot">&lt;-</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  dat_preCAM[dat_preCAM<span class="sc">$</span>ID <span class="sc">%in%</span> <span class="fu">names</span>(<span class="fu">table</span>(dat_preCAM<span class="sc">$</span>ID))[<span class="fu">table</span>(dat_preCAM<span class="sc">$</span>ID) <span class="sc">==</span> <span class="fu">max</span>(<span class="fu">table</span>(dat_preCAM<span class="sc">$</span>ID))], ]</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># &gt; post CAM</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># sort(table(dat_postCAM$ID))</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">table</span>(dat_postCAM<span class="sc">$</span>ID) <span class="sc">!=</span> <span class="fu">max</span>(<span class="fu">table</span>(dat_postCAM<span class="sc">$</span>ID)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">table</span>(dat_postCAM<span class="sc">$</span>ID) <span class="sc">==</span> <span class="fu">max</span>(<span class="fu">table</span>(dat_postCAM<span class="sc">$</span>ID)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 192</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>dat_postCAM <span class="ot">&lt;-</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  dat_postCAM[dat_postCAM<span class="sc">$</span>ID <span class="sc">%in%</span> <span class="fu">names</span>(<span class="fu">table</span>(dat_postCAM<span class="sc">$</span>ID))[<span class="fu">table</span>(dat_postCAM<span class="sc">$</span>ID) <span class="sc">==</span> <span class="fu">max</span>(<span class="fu">table</span>(dat_postCAM<span class="sc">$</span>ID))], ]</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="do">### json (from JATOS) to 2D data.frame</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># &gt; pre study</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co"># add paradata</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>tmp_notNumeric <span class="ot">&lt;-</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="at">string =</span> <span class="fu">colnames</span>(dat_preCAM), <span class="at">pattern =</span> <span class="st">"^meta|^R"</span>)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>tmp_notNumeric <span class="ot">&lt;-</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="at">string =</span> tmp_notNumeric,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">pattern =</span> <span class="st">"labjs|location"</span>,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">negate =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="do">### get survey</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>vec_ques <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"PROLIFIC_PID"</span>,</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>              <span class="st">"dummy_informedconsent"</span>,</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>              <span class="st">"commCheck"</span>,</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>              tmp_notNumeric)</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>vec_notNumeric <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"PROLIFIC_PID"</span>, tmp_notNumeric)</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>questionnaire_preCAM <span class="ot">&lt;-</span> <span class="fu">questionnairetype</span>(</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">dataset =</span> dat_preCAM,</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">listvars =</span> vec_ques,</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">notNumeric =</span> vec_notNumeric,</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">FALSE</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(questionnaire_preCAM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 193  17</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># &gt; post CAM</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>tmp_numeric <span class="ot">&lt;-</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="at">string =</span> <span class="fu">colnames</span>(dat_postCAM), <span class="at">pattern =</span> <span class="st">"^nfc"</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>vec_ques <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PROLIFIC_PID"</span>,</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"commCheck"</span>,</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"feedCAM_repres"</span>,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"feedCAM_technicalprobs"</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"feedCAM_technicalprobsText"</span>,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"feedCAM_already"</span>,</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"feedCAM_alreadyText"</span>,</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"openQuestion_MaterialSystem"</span>,</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"openQuestion_Ethic"</span>,</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"openQuestion_missedPositive"</span>,</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"openQuestion_missedNegative"</span>,</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"outcome_research"</span>,</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"outcome_prohibition"</span>,</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"outcome_buy"</span>,</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"outcome_buy_text"</span>,</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"education"</span>,</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"experienceMS"</span>,</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  tmp_numeric,</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">"feedback_critic"</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>vec_notNumeric <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PROLIFIC_PID"</span>,</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">"feedCAM_technicalprobsText"</span>,</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">"feedCAM_alreadyText"</span>,</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"openQuestion_MaterialSystem"</span>,</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"openQuestion_Ethic"</span>,</span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"openQuestion_missedPositive"</span>,</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">"openQuestion_missedNegative"</span>,</span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"outcome_research"</span>,</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">"outcome_prohibition"</span>,</span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"outcome_buy"</span>,</span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">"outcome_buy_text"</span>,</span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">"education"</span>,</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>  <span class="st">"experienceMS"</span>,</span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">"feedback_critic"</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>questionnaire_postCAM <span class="ot">&lt;-</span> <span class="fu">questionnairetype</span>(</span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">dataset =</span> dat_postCAM,</span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">listvars =</span> vec_ques,</span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">notNumeric =</span> vec_notNumeric,</span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">FALSE</span></span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>questionnaire_postCAM<span class="sc">$</span>feedback_critic[questionnaire_postCAM<span class="sc">$</span>feedback_critic <span class="sc">==</span> <span class="st">""</span>] <span class="ot">&lt;-</span></span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>  <span class="cn">NA</span></span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(questionnaire_postCAM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 192  23</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>questionnaire_postCAM<span class="sc">$</span>multipleEthic <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>tmp_multipleEthic <span class="ot">&lt;-</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cbind</span>(dat_postCAM<span class="sc">$</span>ID, dat_postCAM<span class="sc">$</span>multipleEthic)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>questionnaire_postCAM<span class="sc">$</span>multiplePositive <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>tmp_multiplePositive <span class="ot">&lt;-</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cbind</span>(dat_postCAM<span class="sc">$</span>ID, dat_postCAM<span class="sc">$</span>multiplePositive)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>questionnaire_postCAM<span class="sc">$</span>multipleNegative <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>tmp_multipleNegative <span class="ot">&lt;-</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cbind</span>(dat_postCAM<span class="sc">$</span>ID, dat_postCAM<span class="sc">$</span>multipleNegative)</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> questionnaire_postCAM<span class="sc">$</span>ID) {</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add multipleEthic</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> tmp_multipleEthic[tmp_multipleEthic[, <span class="dv">1</span>] <span class="sc">==</span> i,]</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(<span class="fu">unlist</span>(tmp[, <span class="dv">2</span>])) <span class="sc">==</span> <span class="dv">3</span>) {</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    questionnaire_postCAM<span class="sc">$</span>multipleEthic[questionnaire_postCAM<span class="sc">$</span>ID <span class="sc">==</span> i] <span class="ot">&lt;-</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="fu">unlist</span>(tmp[, <span class="dv">2</span>]), <span class="at">collapse =</span> <span class="st">" </span><span class="sc">\\</span><span class="st"> "</span>)</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add multiplePositive</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> tmp_multiplePositive[tmp_multiplePositive[, <span class="dv">1</span>] <span class="sc">==</span> i,]</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(<span class="fu">unlist</span>(tmp[, <span class="dv">2</span>])) <span class="sc">==</span> <span class="dv">3</span>) {</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>    questionnaire_postCAM<span class="sc">$</span>multiplePositive[questionnaire_postCAM<span class="sc">$</span>ID <span class="sc">==</span> i] <span class="ot">&lt;-</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="fu">unlist</span>(tmp[, <span class="dv">2</span>]), <span class="at">collapse =</span> <span class="st">" </span><span class="sc">\\</span><span class="st"> "</span>)</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add multipleNegative</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> tmp_multipleNegative[tmp_multipleNegative[, <span class="dv">1</span>] <span class="sc">==</span> i,]</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(<span class="fu">unlist</span>(tmp[, <span class="dv">2</span>])) <span class="sc">==</span> <span class="dv">3</span>) {</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>    questionnaire_postCAM<span class="sc">$</span>multipleNegative[questionnaire_postCAM<span class="sc">$</span>ID <span class="sc">==</span> i] <span class="ot">&lt;-</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="fu">unlist</span>(tmp[, <span class="dv">2</span>]), <span class="at">collapse =</span> <span class="st">" </span><span class="sc">\\</span><span class="st"> "</span>)</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(questionnaire_postCAM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 192  26</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">### merge all data sets</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># remove one missing</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>questionnaire_preCAM <span class="ot">&lt;-</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  questionnaire_preCAM[questionnaire_preCAM<span class="sc">$</span>PROLIFIC_PID <span class="sc">%in%</span> questionnaire_postCAM<span class="sc">$</span>PROLIFIC_PID,]</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>questionnaire_postCAM<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>questionnaire <span class="ot">&lt;-</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(questionnaire_preCAM, questionnaire_postCAM, <span class="at">by =</span> <span class="st">"PROLIFIC_PID"</span>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="do">## all missing answers to NA</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>questionnaire[questionnaire <span class="sc">==</span> <span class="st">""</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="do">## all feedback smaller than 3 characters to NA</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>questionnaire<span class="sc">$</span>feedback_critic[<span class="fu">nchar</span>(questionnaire<span class="sc">$</span>feedback_critic) <span class="sc">&lt;=</span> <span class="dv">2</span>] <span class="ot">&lt;-</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>  <span class="cn">NA</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(questionnaire)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 192  41</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="do">### save files</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="do">## save as .xlsx file</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>xlsx<span class="sc">::</span><span class="fu">write.xlsx2</span>(<span class="at">x =</span> questionnaire, <span class="at">file =</span> <span class="st">"questionnaire.xlsx"</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="do">## save as R object</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(questionnaire, <span class="at">file =</span> <span class="st">"questionnaire.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="get-reaction-times-for-single-components" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> get reaction times for single components</h1>
<p>Plot time taken (in minutes) by participants for single components of study:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>dat_duration <span class="ot">&lt;-</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> <span class="cn">NA</span>,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sender =</span> <span class="cn">NA</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ID =</span> <span class="cn">NA</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">PROLIFIC_PID =</span> <span class="cn">NA</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(dat_preCAM<span class="sc">$</span>ID))) {</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>  tmp_PID <span class="ot">&lt;-</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    dat_preCAM<span class="sc">$</span>PROLIFIC_PID[dat_preCAM<span class="sc">$</span>ID <span class="sc">==</span>  <span class="fu">unique</span>(dat_preCAM<span class="sc">$</span>ID)[i] <span class="sc">&amp;</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">!</span><span class="fu">is.na</span>(dat_preCAM<span class="sc">$</span>PROLIFIC_PID)]</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># pre CAM</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>  tmp_preCAM <span class="ot">&lt;-</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">duration =</span> dat_preCAM<span class="sc">$</span>duration[dat_preCAM<span class="sc">$</span>ID <span class="sc">==</span> <span class="fu">unique</span>(dat_preCAM<span class="sc">$</span>ID)[i]] <span class="sc">/</span> <span class="dv">1000</span>,</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">sender =</span> dat_preCAM<span class="sc">$</span>sender[dat_preCAM<span class="sc">$</span>ID <span class="sc">==</span> <span class="fu">unique</span>(dat_preCAM<span class="sc">$</span>ID)[i]])</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>  tmp_preCAM <span class="ot">&lt;-</span> tmp_preCAM[<span class="sc">!</span><span class="fu">is.na</span>(tmp_preCAM<span class="sc">$</span>sender), ]</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># post CAM</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>  tmp_postCAM <span class="ot">&lt;-</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">duration =</span> dat_postCAM<span class="sc">$</span>duration[dat_postCAM<span class="sc">$</span>ID <span class="sc">==</span> <span class="fu">unique</span>(dat_postCAM<span class="sc">$</span>ID)[i]] <span class="sc">/</span> <span class="dv">1000</span>,</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>               <span class="at">sender =</span> dat_postCAM<span class="sc">$</span>sender[dat_postCAM<span class="sc">$</span>ID <span class="sc">==</span> <span class="fu">unique</span>(dat_postCAM<span class="sc">$</span>ID)[i]])</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>  tmp_postCAM <span class="ot">&lt;-</span> tmp_postCAM[<span class="sc">!</span><span class="fu">is.na</span>(tmp_postCAM<span class="sc">$</span>sender), ]</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">rbind</span>(tmp_preCAM, tmp_postCAM)</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">all</span>(<span class="fu">is.na</span>(dat_duration))) {</span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>    dat_duration <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">duration =</span> tmp<span class="sc">$</span>duration,</span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">sender =</span> tmp<span class="sc">$</span>sender,</span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">ID =</span> <span class="fu">rep</span>(i, <span class="at">times =</span> <span class="fu">nrow</span>(tmp)),</span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">PROLIFIC_PID =</span> <span class="fu">rep</span>(tmp_PID, <span class="at">times =</span> <span class="fu">nrow</span>(tmp))</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span>{</span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>    dat_duration <span class="ot">&lt;-</span></span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rbind</span>(</span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a>        dat_duration,</span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>        <span class="fu">data.frame</span>(</span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>          <span class="at">duration =</span> tmp<span class="sc">$</span>duration,</span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a>          <span class="at">sender =</span> tmp<span class="sc">$</span>sender,</span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a>          <span class="at">ID =</span> <span class="fu">rep</span>(i, <span class="at">times =</span></span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">nrow</span>(tmp)),</span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a>          <span class="at">PROLIFIC_PID =</span> <span class="fu">rep</span>(tmp_PID, <span class="at">times =</span></span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">nrow</span>(tmp))</span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a><span class="do">## remove empty sender</span></span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a>dat_duration <span class="ot">&lt;-</span> dat_duration[<span class="sc">!</span><span class="fu">is.na</span>(dat_duration<span class="sc">$</span>sender),]</span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a>dat_duration <span class="ot">&lt;-</span> dat_duration[<span class="sc">!</span><span class="fu">is.na</span>(dat_duration<span class="sc">$</span>duration),]</span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a>dat_duration<span class="sc">$</span>sender[dat_duration<span class="sc">$</span>sender <span class="sc">==</span> <span class="st">"done"</span>] <span class="ot">&lt;-</span></span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CAM instructions"</span></span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a><span class="do">## save as .xlsx</span></span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a><span class="co"># write.xlsx2(x = dat_duration, file = "outputs/para_duration_singleComponents.xlsx")</span></span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a><span class="do">#### plot</span></span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true" tabindex="-1"></a>dat_duration<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="fu">factor</span>(dat_duration<span class="sc">$</span>ID)</span>
<span id="cb32-71"><a href="#cb32-71" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> dat_duration <span class="sc">%&gt;%</span></span>
<span id="cb32-72"><a href="#cb32-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sender, <span class="at">y =</span> duration, <span class="at">color =</span> PROLIFIC_PID)) <span class="sc">+</span></span>
<span id="cb32-73"><a href="#cb32-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb32-74"><a href="#cb32-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb32-75"><a href="#cb32-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>)) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span></span>
<span id="cb32-76"><a href="#cb32-76" aria-hidden="true" tabindex="-1"></a>                                                          <span class="st">"none"</span>)</span>
<span id="cb32-77"><a href="#cb32-77" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/get%20reaction%20times%20by%20component-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="do">## save ggplot as PDF</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"outputs/01_dataPreperation/durations_components.pdf"</span>, p)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the mean duration in seconds for each sender and sort by mean duration</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> dat_duration <span class="sc">%&gt;%</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sender) <span class="sc">%&gt;%</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">N =</span> <span class="fu">n</span>(),</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_duration =</span> <span class="fu">mean</span>(duration, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_duration))</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(tmp, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-ac1584ec8c3836562f27" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ac1584ec8c3836562f27">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16"],["CAM instructions","openQuestion_basalAttributes_Ethic","openQuestion_MaterialSystem","openQuestion_basalAttributes","Greetings","basalAttributes_list","explanationCAM","outcome_MS","CAMfeedbackGeneral","Need for Cognition","ExclusionCriteria","SetupStudy","InformedConsent","FeedbackScreen","socioDemo","EndingScreen"],[193,192,192,192,193,193,193,192,192,192,193,193,193,192,192,192],[292.5699377150259,146.9417745885417,94.87605084895833,94.29442610416666,91.39374397927462,91.01273729015544,77.47869950259067,40.879481078125,39.91379073958333,29.43354494270833,24.28166224870466,23.29098144559585,19.21663924352332,18.19678413020833,14.530161578125,5.999754348958334]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>sender<\/th>\n      <th>N<\/th>\n      <th>mean_duration<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"sender","targets":1},{"name":"N","targets":2},{"name":"mean_duration","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="add-socio-demographic-data" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> add socio-demographic data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="do">### add prolific data</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>prolific <span class="ot">&lt;-</span> prolific[prolific<span class="sc">$</span>Participant.id <span class="sc">%in%</span> questionnaire<span class="sc">$</span>PROLIFIC_PID,]</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>prolific <span class="ot">&lt;-</span> prolific <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">sapply</span>(Participant.id, <span class="cf">function</span>(y) <span class="fu">which</span>(y <span class="sc">==</span> questionnaire<span class="sc">$</span>PROLIFIC_PID)))</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">all</span>(prolific<span class="sc">$</span>Participant.id <span class="sc">==</span> questionnaire<span class="sc">$</span>PROLIFIC_PID)){</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"prolific data sucessfully added"</span>)</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  questionnaire<span class="sc">$</span>socio_age <span class="ot">&lt;-</span> prolific<span class="sc">$</span>Age</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  questionnaire<span class="sc">$</span>socio_sex <span class="ot">&lt;-</span> prolific<span class="sc">$</span>Sex</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>  questionnaire<span class="sc">$</span>socio_ethnicity <span class="ot">&lt;-</span> prolific<span class="sc">$</span>Ethnicity.simplified</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>  questionnaire<span class="sc">$</span>socio_student <span class="ot">&lt;-</span> prolific<span class="sc">$</span>Student.status</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>  questionnaire<span class="sc">$</span>socio_employment <span class="ot">&lt;-</span> prolific<span class="sc">$</span>Employment.status</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>  questionnaire<span class="sc">$</span>total_min_prolific <span class="ot">&lt;-</span> prolific<span class="sc">$</span>Time.taken <span class="sc">/</span> <span class="dv">60</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>  <span class="do">## all time outs to NA</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># questionnaire$total_min_prolific[questionnaire$total_min_prolific &gt; 1000] &lt;- NA</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## all expired data to NA</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>  questionnaire[questionnaire <span class="sc">==</span> <span class="st">"DATA_EXPIRED"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>  questionnaire<span class="sc">$</span>socio_age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(questionnaire<span class="sc">$</span>socio_age)</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "prolific data sucessfully added"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="do">## all missing answers to NA</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># questionnaire[questionnaire == ""] &lt;- NA</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="do">## all feedback smaller than 3 characters to NA</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co"># questionnaire$feedback_critic[nchar(questionnaire$feedback_critic) &lt;= 2] &lt;- NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="describe-sample" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="describe-sample"><span class="header-section-number">6.1</span> Describe sample</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(questionnaire<span class="sc">$</span>socio_sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
           Female              Male Prefer not to say 
               63               127                 2 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="at">x =</span> <span class="fu">table</span>(questionnaire<span class="sc">$</span>socio_sex) <span class="sc">/</span> <span class="fu">nrow</span>(questionnaire) <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
           Female              Male Prefer not to say 
            32.81             66.15              1.04 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(<span class="at">x =</span> questionnaire[, <span class="fu">c</span>(<span class="st">"socio_age"</span>, <span class="st">"total_min_prolific"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   vars   n  mean    sd median trimmed   mad   min   max range
socio_age             1 192 30.49  9.12  28.00   29.44  8.90 18.00 71.00 53.00
total_min_prolific    2 192 34.91 13.25  32.48   33.37 10.72 12.17 91.88 79.72
                   skew kurtosis   se
socio_age          1.19     1.91 0.66
total_min_prolific 1.38     2.80 0.96</code></pre>
</div>
</div>
</section>
</section>
<section id="set-up-cam-data" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> set up CAM data</h1>
<p>Load CAM data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"outputs/01_dataPreperation"</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressMessages</span>(<span class="fu">read_file</span>(<span class="st">"CAMdata.txt"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ... split it into lines ...</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">'</span><span class="sc">\n</span><span class="st">'</span>) <span class="sc">%&gt;%</span> <span class="fu">first</span>() <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">discard</span>(<span class="cf">function</span>(x) x <span class="sc">==</span> <span class="st">''</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">discard</span>(<span class="cf">function</span>(x) x <span class="sc">==</span> <span class="st">'</span><span class="sc">\r</span><span class="st">'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ... filter empty rows ...ds</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">discard</span>(<span class="cf">function</span>(x) x <span class="sc">==</span> <span class="st">''</span>)) <span class="ot">-&gt;</span> dat_CAM_pre</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>raw_CAM <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(dat_CAM_pre)){</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  raw_CAM[[i]] <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="at">txt =</span> dat_CAM_pre[[i]])</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># raw_CAM[[i]]$connectors$isBidirectional &lt;- TRUE</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Create CAM files, draw CAMs and compute network indicators</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="do">### create CAM single files (nodes, connectors, merged)</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>CAMfiles <span class="ot">&lt;-</span> <span class="fu">create_CAMfiles</span>(<span class="at">datCAM =</span> raw_CAM, <span class="at">reDeleted =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Nodes and connectors, which were deleted by participants were removed. 
 # deleted nodes:  0 
 # deleted connectors:  434</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(CAMfiles[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6369</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(CAMfiles[[<span class="dv">2</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7880</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(CAMfiles[[<span class="dv">3</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15760</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove testing data sets</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>CAMfiles[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> CAMfiles[[<span class="dv">1</span>]][CAMfiles[[<span class="dv">1</span>]]<span class="sc">$</span>participantCAM <span class="sc">%in%</span> questionnaire<span class="sc">$</span>PROLIFIC_PID,]</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>CAMfiles[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> CAMfiles[[<span class="dv">2</span>]][CAMfiles[[<span class="dv">2</span>]]<span class="sc">$</span>participantCAM <span class="sc">%in%</span> questionnaire<span class="sc">$</span>PROLIFIC_PID,]</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>CAMfiles[[<span class="dv">3</span>]] <span class="ot">&lt;-</span> CAMfiles[[<span class="dv">3</span>]][CAMfiles[[<span class="dv">3</span>]]<span class="sc">$</span>participantCAM.x <span class="sc">%in%</span> questionnaire<span class="sc">$</span>PROLIFIC_PID,]</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="do">### draw CAMs</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>CAMdrawn <span class="ot">&lt;-</span> <span class="fu">draw_CAM</span>(<span class="at">dat_merged =</span> CAMfiles[[<span class="dv">3</span>]],</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">dat_nodes =</span> CAMfiles[[<span class="dv">1</span>]],<span class="at">ids_CAMs =</span> <span class="st">"all"</span>,</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">plot_CAM =</span> <span class="cn">FALSE</span>,</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>                     <span class="at">useCoordinates =</span> <span class="cn">TRUE</span>,</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>                     <span class="at">relvertexsize =</span> <span class="dv">3</span>,</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">reledgesize =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>processing 192 CAMs... </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `graph.data.frame()` was deprecated in igraph 2.0.0.
ℹ Please use `graph_from_data_frame()` instead.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "== participantCAM in drawnCAM"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">edge.attributes</span>(<span class="at">graph =</span> CAMdrawn[[i]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$width
 [1] 5 1 1 1 1 1 3 1 1 1 1 1 1 1 1 1 1 1 1 1 5 1 1 1 1 5 1 1 1 1 1 1 1 1 1 1 1 1
[39] 1

$weight
 [1] 3 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 3 1 1 1 1 3 1 1 1 1 1 1 1 1 1 1 1 1
[39] 1

$color
 [1] "grey" "grey" "grey" "grey" "grey" "grey" "grey" "grey" "grey" "grey"
[11] "grey" "grey" "grey" "grey" "grey" "grey" "grey" "grey" "grey" "grey"
[21] "grey" "grey" "grey" "grey" "grey" "grey" "grey" "grey" "grey" "grey"
[31] "grey" "grey" "grey" "grey" "grey" "grey" "grey" "grey" "grey"

$lty
 [1] 1 1 1 1 1 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
[39] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">is_directed</span>(<span class="at">graph =</span> CAMdrawn[[i]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(CAMdrawn[[i]], <span class="at">edge.arrow.size =</span> .<span class="dv">2</span>,</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">layout=</span>layout_nicely, <span class="at">vertex.frame.color=</span><span class="st">"black"</span>, <span class="at">asp =</span> .<span class="dv">5</span>, <span class="at">margin =</span> <span class="sc">-</span><span class="fl">0.1</span>,</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="dv">10</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/draw%20CAMs,%20network%20indicators,%20wordlist-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="do">### network indicators</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>tmp_microIndicator <span class="ot">&lt;-</span> <span class="fu">V</span>(CAMdrawn[[<span class="dv">1</span>]])<span class="sc">$</span>label</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>networkIndicators <span class="ot">&lt;-</span> <span class="fu">compute_indicatorsCAM</span>(<span class="at">drawn_CAM =</span> CAMdrawn,</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">micro_degree =</span> tmp_microIndicator,</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">micro_valence =</span> tmp_microIndicator,</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">micro_centr_clo =</span> tmp_microIndicator,</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">micro_transitivity =</span> <span class="cn">NULL</span>, <span class="co"># not informative</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">largestClique =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `graph.density()` was deprecated in igraph 2.0.0.
ℹ Please use `edge_density()` instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `types1` argument of `assortativity()` is deprecated as of igraph 1.6.0.
ℹ Please use the `values` argument instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `assortativity.degree()` was deprecated in igraph 2.0.0.
ℹ Please use `assortativity_degree()` instead.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="do">### wordlist</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>CAMwordlist <span class="ot">&lt;-</span> <span class="fu">create_wordlist</span>(</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">dat_nodes =</span>  CAMfiles[[<span class="dv">1</span>]],</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">dat_merged =</span>  CAMfiles[[<span class="dv">3</span>]],</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">useSummarized =</span> <span class="cn">TRUE</span>,</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">order =</span> <span class="st">"frequency"</span>,</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">splitByValence =</span> <span class="cn">FALSE</span>,</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">comments =</span> <span class="cn">TRUE</span>,</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">raterSubsetWords =</span> <span class="cn">NULL</span>,</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">rater =</span> <span class="cn">FALSE</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "create_wordlist - use raw words"
[1] 0
[1] 6336
[1] "temporarily suffixes are added, because not all words have been summarized"
processing 192 CAMs... 
[1] "== participantCAM in drawnCAM"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(CAMwordlist, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-60c5629f6caa6849573d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-60c5629f6caa6849573d">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33"],["Akzeptanz eines neuen Materialsystems","Energie   generierend","Energie   speichernd","Insekten ähnlich","aktive Formänderung durch Umwelteinwirkung","aktive Verhaltensänderung durch Umwelteinwirkung","autonom","bioinspiriert","elektronikfrei","energieautonom","energieeffizient","enthält Kunststoff","haltbar","intelligent","langlebig","lebensähnlich","leicht zerstörbar","multifunktional","nachhaltig","passive Formänderung durch Umwelteinwirkung","passive Verhaltensänderung durch Umwelteinwirkung","reaktionsfähig","robust","selbstheilend","selbstreparierend","technologisch","umweltfreundlich","umweltschädlich","wartungsfrei","wartungsintensiv","widerstandsfähig","zuverlässig","ökologisch"],[192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192,192],[100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],[0.3385416666666667,1.703125,1.53125,-0.1354166666666667,0.1614583333333333,0.2916666666666667,0.75,0.7916666666666666,0.453125,1.432291666666667,2.104166666666667,-1.104166666666667,1.916666666666667,1.354166666666667,2.177083333333333,0.3177083333333333,-1.776041666666667,1.671875,2.401041666666667,0,0.05729166666666666,0.703125,1.838541666666667,1.625,1.791666666666667,0.796875,2.53125,-2.630208333333333,1.791666666666667,-2.046875,1.723958333333333,2.197916666666667,1.953125],[0.8344506035548922,1.245049095943168,0.9702714576708318,1.140586711028678,1.11156413466787,1.138720386518854,0.9266276185477623,1.022435923738054,1.062394127771098,1.051351141810237,0.9918956061717168,1.12076233093519,1.108431906545692,1.082745846879787,1.038472414833433,0.9198787527281885,1.394397525452403,1.013852031811534,0.9437581986514422,1.111576400541518,1.034407516044602,1.102301554601774,0.9434114093331896,1.123289857833695,1.052711946964115,0.9736801376587715,0.8973856735653957,0.8883916630326395,1.134113272334455,1.009323356879972,1.069250830520573,0.9827815176038897,1.019645059381165],[12.43229166666667,2.145833333333333,1.776041666666667,1.567708333333333,1.583333333333333,1.515625,2.119791666666667,2.333333333333333,1.59375,2,2.239583333333333,1.713541666666667,2.645833333333333,2.807291666666667,3.026041666666667,2.1875,1.729166666666667,1.864583333333333,3.515625,1.567708333333333,1.463541666666667,1.838541666666667,2.348958333333333,2.057291666666667,2.078125,3.078125,3.322916666666667,2.322916666666667,2.260416666666667,1.692708333333333,2.026041666666667,2.109375,2.609375],[9.367740062740403,1.886736103409602,1.086253447970878,1.109501542877462,0.9562871774702756,0.8436803102885514,1.663033234040082,1.622270832106976,1.069110556583814,1.265738614737536,1.529772878920928,1.169518609667889,1.992021608130804,2.460015101969848,2.389845217957445,1.6583123951777,1.106659202228869,1.528917021958649,2.747634036957455,0.8953626650244697,0.8492213608481407,1.428935809612531,1.720860298163121,1.572622100349002,1.402742498937209,3.344001525745537,2.237214010114055,1.357506118634146,1.613067005983963,1.159684448113886,1.54321652202693,1.625553671282463,2.3665459897213],["muss sich gegen bestehende Materialsysteme behaupten können","Sorgsamer Umgang mit den Ressourcen","besonders wichtig angesichts der Herausforderungen zur Energiegewinnung","Wird die Menschen eher abschrecken\n","Kann vorteilhaft sein, aber genauso sehr hinderlich","Hängt davon ab wie genau das Funktioniert da es auch schnell ins gegenteil kippen kann\n","nicht sicher was damit gemeint ist ","unklar","Könnte sich gut oder schlecht auswirken schwer vorstellbar das es ohne Elektronik funktioniert","zahlt auf Nachhaltigkeit ein","zahlt auf Nachhaltigkeit ein","Kunststoff per se ist vielseitig nutzbar, aber in großen Mengen umweltschädlich","ist das Gleiche wie langlebig","Könnte nützlich sein aber auch für ,,böse'' zwecke Missbraucht werden","Neue Langlebige Materialien die nachhaltiger als die bisherigen sind wären gut","kommt auf die Situation, ob man hier auch \"Gefühle\" braucht","Könnte von vorteil sein wenn man es leicht entsorgen kann aber macht es dann wohl auch einfach es mutwillig zu zerstören\n","gute Eigenschaft","sollte jedes neue Material sein, fast ein Must-Have","Nutzungsbedingt","passt sich an aber nicht gewünscht","unklar ob positiv oder negativ zu bewerten","hält lange","ist sinnvoll","praktisch","inwiefern technologisch?","Durch die verbindung beider sachen spart man viel an Material\n","Neue/Moderne Materialien sollten weniger Umweltschädlich sein","spart Zeit und Ressourcen","Kosten für die Wartung zu Hoch\n","Steht oft für gute Qualität","Grundvoraussetzung","Umweltschutz ist wichtig"],["je nach Konzept","Kann umweltschädlich sein, da ggf. durch Verbrennung o.Ä. Energie erzeugt","Wenn Energie speichernd, dann es schneller kaputt gehen","Unklar.","Macht Sinn, damit es besonders widerstandsfähig ist","kann vorteilhaft und hinderlich zugleich sein","Muss nicht dauernd neu produziert werden","unklar ob Vor- oder Nachteil","unklar ob Vor oder Nachteil","Sagt mir in Verbindung zu Materialsystemen gar Nichts.","Weniger energie für mehr Leistung","Ist Umweltschädlich.","kommt auf Einsatz an, zum wegschmeißen blöd","entwickelt sich selbst weiter","zahlt auf Nachhaltigkeit ein","Kann vorteilhaft sein, weil es angepasste Verhaltensweisen zeigt, aber auch unheimlich o verstörend, weil es lebensähnlich aussieht","Je nach Anwendungsbereich kann dies eine gewünschte Eigenschaft sein.","kann praktisch sein, aber auch bedeuten, dass nichts richtig funktioniert","Wenn oekologisch, dann auch nachhaltig","Wenn ich das richtig verstehe, dann ist eine \"passive Formänderung\" doch eher schlecht, da die Umwelt sich eher schlecht auf das Material einwirkt.","kommt auf Einsatz an, zum wegschmeißen blöd","Wirkt sich schlecht auf das Material aus?. Material sollte nicht unbedingt reaktionsfähig sein","robuste systeme halten länger","klingt nach Zukunftsmusik","Doppeltes Konzept?","für technische Gegebenheiten\n","Zukunftsorientiert","Neue Materialsysteme sollten mit Blick auf die Zukunft entwickelt werden.","man braucht niemanden bzw. weniger Experten\n","Wartungsintensiv korreliert stark mit umweltschädlich\n","hält lange","weniger Ausfall als bisher\n","Es ist mir wichtig"],["Es hängt vom Anwendungsfall ab!","Ich kenne keine energiegenerierenden Materialsysteme.","Eventuell Wärmeenergie in Baumaterialien?","Man sieht immer wieder, das Konzepte erstellt durch die Beobachtung von Insekten btw Tieren gut sind.","passt sich an und man will es","wenns gewolt ist ist es gut","prinzipiell gut, da keine Beaufsichtigung notwendig ist, aber die Programmierung oä muss auch sehr ausgereift sein","die Eigenschaften der Tiere zu Nutze machen","Grundsätzlich würde ich Elektronik nicht ablehenen","kann selbständig an und ausschalten. Was passiert allerdings bei einem Unfall?","Das Material verbraucht wenig Energie bei der Herstellung","Plastik verursacht Müll","Haltbare Materialien sind häufig schwierig abzubauen. Sie können aber auch umweltfreundlich sein, da sie in die Kreislaufwirtschaft geraten können und da sie es vermeiden, gleiche Produkte immer wieder herzustellen und zu kaufen. Es hängt vom Anwendungsfall ab!\n","denkt mit und passts sich an","Möglicherweise schlecht abbaubar","Unverständnis gegenüber des Begriffs","nicht langlebig/nachhaltig","Macht sinn, aber nicht zwingend nötig","Sehr wichtig, aber kann auch ambivalent sein, wenn es so wie Elektroautos sind ","ich möchte eigentlich keine Formänderung, verstehe es aber auch nicht ganz: Wird dann die Form ohne mein Zutun geändert?","Je nach gewünschter Anwendung. Resorbierbare Werkstoffe sollen sich Verändern, andere nicht.","Insekten sind sehr reaktionsfreudig, Material kann also schnell sich an Umgebung anpassen","Das Material ist sehr lange haltbar\n","Römischer Beton?","sehr gute Eigenschaft für langlebigkeit und verbrauch","Es sollte bessere erweiternde Funktionen haben","siehe nachhaltig und ökologisch","schlecht in Bezug auf Nachhaltigkeit","Das würde auch Arbeitsplätze zerstören, wenn sich niemand drum kümmern muss","wenn Vorteile überwiegen, kann sich der Wartungsaufwand lohnen","wenn es haltbar ist, sollte es auch widerstandsfähig sein","Muss es sein, man muss sich verlassen können","je geringer der Umwelteinfluss desto besser\n"],["","Wenn der Primaerzweck die Energiegewinnung ist (e.g. Solarzellen) positiv, falls nur Nebeneffekt eher negativ, da meist die generierte Energie sehr gering\n","Abhängig vom Endprodukt, grundsätzlich aber positives Merkmal","außer dass sich jemanden erschrecken könnte, hat das jetzt keinen Vor- oder Nachteil, höchstens man nutzt Tiereigenschaten, dann ist es vorteilhaft","Wenn es sich auf Umwelteinflüsse einstellen kann","passt sich an, wenn gewünscht","Zukunft","Kann funktionieren, aber da muss man schon einen sehr guten Stoff aus der Natur ziehen","Dann: Funktionsarm aber ggf. Haltbarer?","Kann Strom sparen.","nachhaltig","kann das ganze stabil machen, kommt auf die Haltbarkeit dann an","","Kommt drauf an, wie man es umsetzt, dauert wahrscheinlich bis das ausgereift ist","kommt auf Einsatz an, zum wegschmeißen blöd","humanoide Eigenschaften ","je nachdem wie man es sieht, jedoch sollte es denke ich für bestimmte Bereiche nicht leicht zerstörbar sein","Wahrscheinlich zu schwer umzusetzen. Bzw kann es dann beides nur so ordnung und nichts so richtig","gut für die Umwelt","ich kann mir nicht viel darunter vorstellen","Abhängig vom Gebrauch","Es können ja auch ungewünschte Reaktionen auftreten","meiner Meinung nach notwendig, da es die Qualität des Materials zeigt.","wäre schon praktisch","Nettes Beiwerk, falls möglich","verbunden mit ökologisch","wenn möglich ist es sehr wichtig die Umwelt gleichzeitig zu schützen","Nicht für die Akzeptanz zuträglich","Wartungen bestätigen korrekte Ausführung","bedeutet Aufwand","Tiere sind widerstandsfähig wenn nicht irgendwas dazwischen","In der Funktion unzuverlässige Systeme sind nicht verwendbar.","das Material wird umweltfreundlich hergestellt "],["","sehr positiv für die umwelt, aber kann auch negativ sein, wenn es viel CO2 austößt","","was soll das sein?","kommt auf Einsatz an, zum wegschmeißen blöd","Unklar was genau damit gemeint ist.","mir fehlt die Vortsellungskraft für ein autonomes Material","","Wenig Belastung durch Strahlung einerseits, wenig umsetzbar/Akzeptanz andererseits.","","","Nicht mehr Zeitgemäß","","Es sollte ein intelligentes System sein ","Vgl. Kommentar zur Widerstandsfähigkeit --&gt; Anwendungsspezifisch, generell aber zu bevorzugen","kann Vorteilhalft sein, aber auch zu Problemen führen mit der Akzeptanz (z.B. insekentähnlich)","muss dann nämlich immer wieder ersetzt werden","Desto mehr features umso besser","Nach meiner Meinung der wichtigste Aspekt","Unklar was genau damit gemeint ist.","","kommt auf Einsatz an","","Nicht so wichtig, hat wenig Einfluss","gleich wie selbstheilend","erfordert ggf bestimmte Bestandteile wie seltene Erden","mit ökologisch","kommt darauf an wie umweltschädlich die bisher verwendeten Materialien sind (z.B. FCKW zu ersetzen mit anderen (weniger) umweltschädlichen Materialien kann trotzdem sinnvoll sein","Wartung bedeutet oft auch Arbeitskräfte, wenn diese wegfallen kann dies negativ sein","es ist nicht unbedingt schlimm, sollte es Wartungen geben. Aber zu viele Wartungen würde ich doch als negativ betrachten","kommt auf Einsatz an, zum wegschmeißen blöd","Das Material ist widerstandfähig ","ökologisch da nachhaltig"],["","","","Unverständnis gegenüber des Begriffs\n","auf Umweltänderungen reagieren zu können kann praktisch sein, Z.B. Dächer bei Regen oder Sonne","Das sollte nicht so schnell kaputt gehen","Was soll ein autonomes Materialsystem sein????","","In manchen Bereichen zu bevorzugen, in anderen weniger\n","","","muss nicht zwangsläufig schlecht sein\n","","K.I Insperierte materialien","was passiert mit dem System wenn es nicht mehr gebraucht wird?","Soll keine ungewollte Ausbreitung verursachen\n","Muss ausgetauscht werden","Das Material kann für verschiedene Produkte verwendet werden ","Das Material schadet nicht der Umwelt ","Abhängig vom Gebrauch","","Reaktion kann positiv oder negativ sein","","Kann praktisch sein.","","Für viele Menschen oft überforderend","Ist mir persönlich sehr wichtig, sollte möglichst in allen Bereichen sein","Heutzutage unverantwortlich","einfach zu warten \n","neuartige Technologie, Fachkräftemangel","Abhängig von der Anwendung. Bspw. resorbierbare Werkstoffe sollen nicht dauerhaft widerstandsfähig gegen Zersetzung sein.","Notwendig, damit das Material weitläufig eingesetzt wird.",""],["","","","Bioengineering -&gt; Abschauen wertvoller Konzepte aus der Natur könnte große Vorteile in verschiedenen Bereichen bringen.","Unklar was genau damit gemeint ist.","Abhängig vom Gebrauch","\"autonom\" klingt für mich erst mal \"gefährlich\", bzw. da bin ich misstrauisch...","","Vermutlich positiv","","","Kunststoff ist ein Material, welches positive Aspekte hat, jedoch auch zur Umweltverschmutzung beiträgt","","Intelligente Systeme ermöglichen neue Anwendungsfelder","Langlebigkeit ist ein gutes Konzept, aber für die freie Marktwirtschaft eher schädlich","Irrelevant m.E. solange das Material seinen Zweck erfüllt","kommt auf Einsatz an, zum wegschmeißen blöd","Vielseitigkeit.","","","","wenn es auf fehler reagieren kann\n","","","","meistens gut umgesetzt","nachhaltigkeit und umweltfreundlichkeit geht meistens hand in hand","Das Material schadet der Umwelt ","kostet weniger geld","kostet Geld und Nerven","Steht meistens in Konflikt mit Nachhaltigkeit und Umweltfreundlichkeit","",""],["","","","Empfinden viele Menschen als Unangenehm\n","Kann sich negativ auswirken wenn die Formänderung ungewollt passiert\n","","","","Weniger Elektronik unterstützt die Idee nicht.","","","Kann sehr haltbar und robust sein, benötigt aber auch umweltschädliche Grundstoffe Erdöl","","Kann zu hohen Kosten führen aber auch auf lange zeit gesehen kosten einsparen.","Je langlebiger ein Objekt, desto besser ist es für den Umweltschutz ","","ggf kann eine Zerstörung notwendig sein, dann ist das eine gute Eigenschaft, aber wenn nicht, ist es ggf aufwändig zu betreuen","","","","","Wenn die Reaktion gewollt ist und kontrolliert werden kann, ist sie ein Vorteil. Wenn ungewollte Reaktionen auftreten oder sie nicht vollständig kontrolliert werden können, dann ist Reaktionsfähigkeit ein Nachteil.","","","","","Umwelt und die Gedanken darüber haben einen postiven Einfluss","nicht nachhaltig","Essenziell","mit großen Kosten verbunden","muss was aushalten können","",""],["","","","Insekten sind sehr robust","Abhängig vom Gebrauch","","","","Es kommt auf den Einsatzzweck an. An manchen Stellen hat Elektronik nichts zu suchen, an anderen Stellen ist sie sehr nützlich.","","","falls mehrere unterschiedliche Kunststoffe kombiniert werden wird es schwierig mit der nachhaltigkeit","","Aktueller Trend\n","langlebig da robust","","kann von Vorteil sein, beispielsweise bei recycling, aber bezüglich nachhaltigkeit auch nachteilhaft, falls es dadurh nicht langlebig nutzbar ist","","","","","","","","","","","","Das Material muss nicht repariert werden ","Schafft Arbeitsplätze, kostet aber ggf auch mehr","jenachdem kann das Material ja flexibel auf die Umwelteinwirkungen reagieren","",""],["","","","schon ekelig","","","","","","","","Kunststoff wird von vielen aufgrund möglicher Umweltverschmutzung abgelehnt\n","","Empfinden viele Personen als unangenehm\n","Schont die Umwelt und den Geldbeutel.","","Könnte Vorteile haben, Einfacher Abbau.","","","","","","","","","","","","","Wird von vielen als negativ angesehen, allerdings schafft es auch Arbeitskräfte\n","","",""],["","","","Inwieweit relevant?","","","","","","","","Kunststoff kann falls nicht recycelt umweltschädlich sein ","","\"smart systems\" ist ein overhypter Begriff, der dem End","","","Kann sowohl negativ als auch positiv sein\n","","","","","","","","","","","","","Das Material ist empfindlich und muss oft überprüft werden ","","",""],["","","","eklig","","","","","","","","generell bin ich gegen kunststoff, aber wenn es sehr langlebig ist, kann es doch sinnvoller sein als nicht so langlebige Materialien zu nehmen","","umso intelligenter umso akzeptierter\n","","","Wenn damit der schadstofffreie Abbau gemeint ist (e.g. kompostierbar), positiv. Falls Schadstoffe vorhanden, negativ ","","","","","","","","","","","","","umweltschädlich da bei Wartung Materialen verbraucht werden","","",""],["","","","hat keinen Einfluss","","","","","","","","Entsorgung nicht umweltfreundlih\n","","Technologien meist intelligente Lösungen","","","Hält nicht lange","","","","","","","","","","","","","Klar negativ","","",""],["","","","Hängt von der Verwendung des Materials ab.","","","","","","","","umweltfeindlich","","abhängig vom Endprodukt","","","Das Material kann leicht zerstört werden ","","","","","","","","","","","","","Erhöht die Kosten.","","",""],["","","","","","","","","","","","Kunststoff ist kein umweltfreundliches Material ","","Kommt auf die Verwendung an. Bei \"systemkritischen\" Komponenten möchte ich keine eingebaute \"Intelligenz\", da man nicht exakt vorhersagen kann, wie sie sich in jeder Situation verhält.","","","Hängt von der Nutzung ab.","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","Kann ja auch recycelt sein - wie lange haltbar??","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","Hat Vorteile und Nachteile","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","Hängt vom Einsatzzweck ab.","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","Kunststoffe sind unterschiedlich, so wie ihr Einfluss auf die Umweltfreundlichkeit","","","","","","","","","","","","","","","","","","","","",""]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Words<\/th>\n      <th>raw<\/th>\n      <th>percent<\/th>\n      <th>mean_valence<\/th>\n      <th>sd_valence<\/th>\n      <th>mean_degree<\/th>\n      <th>sd_degree<\/th>\n      <th>comment_1<\/th>\n      <th>comment_2<\/th>\n      <th>comment_3<\/th>\n      <th>comment_4<\/th>\n      <th>comment_5<\/th>\n      <th>comment_6<\/th>\n      <th>comment_7<\/th>\n      <th>comment_8<\/th>\n      <th>comment_9<\/th>\n      <th>comment_10<\/th>\n      <th>comment_11<\/th>\n      <th>comment_12<\/th>\n      <th>comment_13<\/th>\n      <th>comment_14<\/th>\n      <th>comment_15<\/th>\n      <th>comment_16<\/th>\n      <th>comment_17<\/th>\n      <th>comment_18<\/th>\n      <th>comment_19<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Words","targets":1},{"name":"raw","targets":2},{"name":"percent","targets":3},{"name":"mean_valence","targets":4},{"name":"sd_valence","targets":5},{"name":"mean_degree","targets":6},{"name":"sd_degree","targets":7},{"name":"comment_1","targets":8},{"name":"comment_2","targets":9},{"name":"comment_3","targets":10},{"name":"comment_4","targets":11},{"name":"comment_5","targets":12},{"name":"comment_6","targets":13},{"name":"comment_7","targets":14},{"name":"comment_8","targets":15},{"name":"comment_9","targets":16},{"name":"comment_10","targets":17},{"name":"comment_11","targets":18},{"name":"comment_12","targets":19},{"name":"comment_13","targets":20},{"name":"comment_14","targets":21},{"name":"comment_15","targets":22},{"name":"comment_16","targets":23},{"name":"comment_17","targets":24},{"name":"comment_18","targets":25},{"name":"comment_19","targets":26}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="plot-cams-using-igraph-package" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="plot-cams-using-igraph-package"><span class="header-section-number">7.1</span> plot CAMs using igraph package</h2>
<p>Just plot first 10 CAMs for an impression</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){ <span class="co"># length(CAMdrawn)</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(CAMdrawn[[i]], <span class="at">edge.arrow.size =</span> .<span class="dv">7</span>,</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">layout=</span>layout_nicely, <span class="at">vertex.frame.color=</span><span class="st">"black"</span>, <span class="at">asp =</span> .<span class="dv">5</span>, <span class="at">margin =</span> <span class="sc">-</span><span class="fl">0.1</span>,</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">vertex.size =</span> <span class="dv">10</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">9</span>)</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/draw%20first%2010%20CAMs-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/draw%20first%2010%20CAMs-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/draw%20first%2010%20CAMs-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/draw%20first%2010%20CAMs-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/draw%20first%2010%20CAMs-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/draw%20first%2010%20CAMs-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/draw%20first%2010%20CAMs-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/draw%20first%2010%20CAMs-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/draw%20first%2010%20CAMs-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/draw%20first%2010%20CAMs-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="save-cams-as-.json-files-and-as-.png-igraph" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="save-cams-as-.json-files-and-as-.png-igraph"><span class="header-section-number">7.2</span> save CAMs as .json files, and as .png (igraph)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(save_CAMs_as_pictures) {</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  raw_CAM_translated <span class="ot">&lt;-</span> raw_CAM</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setwd</span>(<span class="st">"outputs/01_dataPreperation"</span>)</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setwd</span>(<span class="st">"savedCAMs"</span>)</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setwd</span>(<span class="st">"png"</span>)</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>  <span class="do">### remove all files if there are any</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(<span class="fu">list.files</span>()) <span class="sc">&gt;=</span> <span class="dv">1</span>) {</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.remove</span>(<span class="fu">list.files</span>())</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">'</span><span class="sc">\n</span><span class="st">!</span></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a><span class="st">      all former .png files have been deleted'</span>)</span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>  <span class="do">### if no participant ID was provided replace by randomly generated CAM ID</span></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">all</span>(CAMfiles[[<span class="dv">3</span>]]<span class="sc">$</span>participantCAM.x <span class="sc">==</span> <span class="st">"noID"</span>)) {</span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>    CAMfiles[[<span class="dv">3</span>]]<span class="sc">$</span>participantCAM.x <span class="ot">&lt;-</span> CAMfiles[[<span class="dv">3</span>]]<span class="sc">$</span>CAM.x</span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>  <span class="do">### save as .json files, and as .png (igraph)</span></span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a>  ids_CAMs <span class="ot">&lt;-</span> <span class="fu">unique</span>(CAMfiles[[<span class="dv">3</span>]]<span class="sc">$</span>participantCAM.x)</span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">length</span>(ids_CAMs)</span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(ids_CAMs)) {</span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">save_graphic</span>(<span class="at">filename =</span> <span class="fu">paste0</span>(<span class="st">"CAM"</span>, ids_CAMs[i])) <span class="co">#  paste0(ids_CAMs[i]))</span></span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a>    CAM_igraph <span class="ot">&lt;-</span> CAMdrawn[[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(CAMdrawn))[<span class="fu">names</span>(CAMdrawn) <span class="sc">==</span> <span class="fu">paste0</span>(<span class="fu">unique</span>(CAMfiles[[<span class="dv">3</span>]]<span class="sc">$</span>participantCAM.x)[i])]]]</span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a>    <span class="do">### translate:</span></span>
<span id="cb69-31"><a href="#cb69-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">V</span>(CAM_igraph)<span class="sc">$</span>label[<span class="fu">match</span>(listBasalAttributes<span class="sc">$</span>German.Translation,</span>
<span id="cb69-32"><a href="#cb69-32" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">V</span>(CAM_igraph)<span class="sc">$</span>label)] <span class="ot">&lt;-</span> listBasalAttributes<span class="sc">$</span>Basal.Attribute</span>
<span id="cb69-33"><a href="#cb69-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">V</span>(CAM_igraph)<span class="sc">$</span>label[<span class="fu">V</span>(CAM_igraph)<span class="sc">$</span>label <span class="sc">==</span> <span class="st">"Akzeptanz eines neuen Materialsystems"</span>] <span class="ot">&lt;-</span></span>
<span id="cb69-34"><a href="#cb69-34" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Acceptance of a new material system"</span></span>
<span id="cb69-35"><a href="#cb69-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-36"><a href="#cb69-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot</span>(</span>
<span id="cb69-37"><a href="#cb69-37" aria-hidden="true" tabindex="-1"></a>      CAM_igraph,</span>
<span id="cb69-38"><a href="#cb69-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.arrow.size =</span> .<span class="dv">7</span>,</span>
<span id="cb69-39"><a href="#cb69-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">layout =</span> layout_nicely,</span>
<span id="cb69-40"><a href="#cb69-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.frame.color =</span> <span class="st">"black"</span>,</span>
<span id="cb69-41"><a href="#cb69-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">asp =</span> .<span class="dv">5</span>,</span>
<span id="cb69-42"><a href="#cb69-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">margin =</span> <span class="sc">-</span><span class="fl">0.1</span>,</span>
<span id="cb69-43"><a href="#cb69-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.size =</span> <span class="dv">10</span>,</span>
<span id="cb69-44"><a href="#cb69-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.label.cex =</span> .<span class="dv">9</span></span>
<span id="cb69-45"><a href="#cb69-45" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb69-46"><a href="#cb69-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dev.off</span>()</span>
<span id="cb69-47"><a href="#cb69-47" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb69-48"><a href="#cb69-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-49"><a href="#cb69-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setwd</span>(<span class="st">"../json"</span>)</span>
<span id="cb69-50"><a href="#cb69-50" aria-hidden="true" tabindex="-1"></a>  <span class="do">### remove all files if there are any</span></span>
<span id="cb69-51"><a href="#cb69-51" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(<span class="fu">list.files</span>()) <span class="sc">&gt;=</span> <span class="dv">1</span>) {</span>
<span id="cb69-52"><a href="#cb69-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">file.remove</span>(<span class="fu">list.files</span>())</span>
<span id="cb69-53"><a href="#cb69-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">'</span><span class="sc">\n</span><span class="st">!</span></span>
<span id="cb69-54"><a href="#cb69-54" aria-hidden="true" tabindex="-1"></a><span class="st">      all former .json files have been deleted'</span>)</span>
<span id="cb69-55"><a href="#cb69-55" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb69-56"><a href="#cb69-56" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(raw_CAM_translated)) {</span>
<span id="cb69-57"><a href="#cb69-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is_empty</span>(raw_CAM_translated[[i]]<span class="sc">$</span>nodes)) {</span>
<span id="cb69-58"><a href="#cb69-58" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">nrow</span>(raw_CAM_translated[[i]]<span class="sc">$</span>nodes) <span class="sc">&gt;</span> <span class="dv">5</span>) {</span>
<span id="cb69-59"><a href="#cb69-59" aria-hidden="true" tabindex="-1"></a>        <span class="do">### translate:</span></span>
<span id="cb69-60"><a href="#cb69-60" aria-hidden="true" tabindex="-1"></a>        raw_CAM_translated[[i]]<span class="sc">$</span>nodes<span class="sc">$</span>text[<span class="fu">match</span>(listBasalAttributes<span class="sc">$</span>German.Translation,</span>
<span id="cb69-61"><a href="#cb69-61" aria-hidden="true" tabindex="-1"></a>                                                 raw_CAM_translated[[i]]<span class="sc">$</span>nodes<span class="sc">$</span>text)] <span class="ot">&lt;-</span></span>
<span id="cb69-62"><a href="#cb69-62" aria-hidden="true" tabindex="-1"></a>          listBasalAttributes<span class="sc">$</span>Basal.Attribute</span>
<span id="cb69-63"><a href="#cb69-63" aria-hidden="true" tabindex="-1"></a>        raw_CAM_translated[[i]]<span class="sc">$</span>nodes<span class="sc">$</span>text[raw_CAM_translated[[i]]<span class="sc">$</span>nodes<span class="sc">$</span>text <span class="sc">==</span> <span class="st">"Akzeptanz eines neuen Materialsystems"</span>] <span class="ot">&lt;-</span></span>
<span id="cb69-64"><a href="#cb69-64" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Acceptance of a new material system"</span></span>
<span id="cb69-65"><a href="#cb69-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-66"><a href="#cb69-66" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (raw_CAM_translated[[i]]<span class="sc">$</span>creator <span class="sc">%in%</span> questionnaire<span class="sc">$</span>PROLIFIC_PID) {</span>
<span id="cb69-67"><a href="#cb69-67" aria-hidden="true" tabindex="-1"></a>          <span class="co"># only if not deleted previously</span></span>
<span id="cb69-68"><a href="#cb69-68" aria-hidden="true" tabindex="-1"></a>          <span class="fu">write</span>(</span>
<span id="cb69-69"><a href="#cb69-69" aria-hidden="true" tabindex="-1"></a>            <span class="fu">toJSON</span>(raw_CAM_translated[[i]], <span class="at">encoding =</span> <span class="st">"UTF-8"</span>),</span>
<span id="cb69-70"><a href="#cb69-70" aria-hidden="true" tabindex="-1"></a>            <span class="fu">paste0</span>(raw_CAM_translated[[i]]<span class="sc">$</span>creator, <span class="st">".json"</span>)</span>
<span id="cb69-71"><a href="#cb69-71" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb69-72"><a href="#cb69-72" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb69-73"><a href="#cb69-73" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb69-74"><a href="#cb69-74" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb69-75"><a href="#cb69-75" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb69-76"><a href="#cb69-76" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
!
      all former .png files have been deleted</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
!
      all former .json files have been deleted</code></pre>
</div>
</div>
</section>
<section id="delete-cams-with-star-topology" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="delete-cams-with-star-topology"><span class="header-section-number">7.3</span> delete CAMs with star topology</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 10% of participants have connected all basal attributes to the central one</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>(</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    networkIndicators<span class="sc">$</span>degreetot_micro_AkzeptanzeinesneuenMaterialsystems</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">/</span> <span class="fu">nrow</span>(networkIndicators)</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="do">### delete extreme CAMs without any inter-connections between basal attributes</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>vec_delete <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>h <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(networkIndicators)) {</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (networkIndicators<span class="sc">$</span>degreetot_micro_AkzeptanzeinesneuenMaterialsystems[i] <span class="sc">&gt;=</span> <span class="dv">30</span>) {</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># &amp; networkIndicators$transitivity_macro[i] == 0</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>    vec_delete[h] <span class="ot">&lt;-</span> <span class="fu">names</span>(CAMdrawn)[i]</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>    h <span class="ot">=</span> h <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(plot_deleted_CAMs){</span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>          <span class="fu">plot</span>(</span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>      CAMdrawn[[i]],</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.arrow.size =</span> .<span class="dv">7</span>,</span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">layout =</span> layout_nicely,</span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.frame.color =</span> <span class="st">"black"</span>,</span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">asp =</span> .<span class="dv">5</span>,</span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">margin =</span> <span class="sc">-</span><span class="fl">0.1</span>,</span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.size =</span> <span class="dv">10</span>,</span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.label.cex =</span> .<span class="dv">9</span>,</span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">main =</span> networkIndicators<span class="sc">$</span>participantCAM[i]</span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(vec_delete) <span class="sc">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">length</span>(vec_delete), <span class="st">"CAMs are removed from the data set, which results in"</span>,</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">round</span>(<span class="at">x =</span> (<span class="dv">1</span><span class="sc">-</span>(<span class="fu">length</span>(CAMdrawn) <span class="sc">-</span> <span class="fu">length</span>(vec_delete)) <span class="sc">/</span> <span class="fu">length</span>(CAMdrawn)) <span class="sc">*</span> <span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>      <span class="st">"% loss of data"</span>)</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>  <span class="do">## remove deleted CAMs from</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#&gt; CAM files</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>  CAMfiles_clean <span class="ot">&lt;-</span> CAMfiles</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>  CAMfiles_clean[[<span class="dv">1</span>]] <span class="ot">&lt;-</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>    CAMfiles_clean[[<span class="dv">1</span>]][<span class="sc">!</span>CAMfiles_clean[[<span class="dv">1</span>]]<span class="sc">$</span>participantCAM <span class="sc">%in%</span> vec_delete,]</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>  CAMfiles_clean[[<span class="dv">2</span>]] <span class="ot">&lt;-</span></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>    CAMfiles_clean[[<span class="dv">2</span>]][<span class="sc">!</span>CAMfiles_clean[[<span class="dv">2</span>]]<span class="sc">$</span>participantCAM <span class="sc">%in%</span> vec_delete,]</span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>  CAMfiles_clean[[<span class="dv">3</span>]] <span class="ot">&lt;-</span></span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>    CAMfiles_clean[[<span class="dv">3</span>]][<span class="sc">!</span>CAMfiles_clean[[<span class="dv">3</span>]]<span class="sc">$</span>participantCAM.x <span class="sc">%in%</span> vec_delete,]</span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#&gt; drawn CAMs</span></span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>  CAMdrawn_clean <span class="ot">&lt;-</span> CAMdrawn[<span class="sc">!</span><span class="fu">names</span>(CAMdrawn) <span class="sc">%in%</span> vec_delete]</span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">#&gt; network indicators</span></span>
<span id="cb74-21"><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a>  networkIndicators_clean <span class="ot">&lt;-</span></span>
<span id="cb74-22"><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a>    networkIndicators[<span class="sc">!</span>networkIndicators<span class="sc">$</span>participantCAM <span class="sc">%in%</span> vec_delete,]</span>
<span id="cb74-23"><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-24"><a href="#cb74-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-25"><a href="#cb74-25" aria-hidden="true" tabindex="-1"></a>  <span class="do">### 10% of participants have connected all basal attributes to the central one</span></span>
<span id="cb74-26"><a href="#cb74-26" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(</span>
<span id="cb74-27"><a href="#cb74-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>(</span>
<span id="cb74-28"><a href="#cb74-28" aria-hidden="true" tabindex="-1"></a>    networkIndicators_clean<span class="sc">$</span>degreetot_micro_AkzeptanzeinesneuenMaterialsystems</span>
<span id="cb74-29"><a href="#cb74-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">/</span> <span class="fu">nrow</span>(networkIndicators_clean)</span>
<span id="cb74-30"><a href="#cb74-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb74-31"><a href="#cb74-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-32"><a href="#cb74-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">#&gt; re-create wordlist</span></span>
<span id="cb74-33"><a href="#cb74-33" aria-hidden="true" tabindex="-1"></a>  CAMwordlist_clean <span class="ot">&lt;-</span> <span class="fu">create_wordlist</span>(</span>
<span id="cb74-34"><a href="#cb74-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">dat_nodes =</span>  CAMfiles_clean[[<span class="dv">1</span>]],</span>
<span id="cb74-35"><a href="#cb74-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">dat_merged =</span>  CAMfiles_clean[[<span class="dv">3</span>]],</span>
<span id="cb74-36"><a href="#cb74-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">useSummarized =</span> <span class="cn">TRUE</span>,</span>
<span id="cb74-37"><a href="#cb74-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">order =</span> <span class="st">"frequency"</span>,</span>
<span id="cb74-38"><a href="#cb74-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">splitByValence =</span> <span class="cn">FALSE</span>,</span>
<span id="cb74-39"><a href="#cb74-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">comments =</span> <span class="cn">TRUE</span>,</span>
<span id="cb74-40"><a href="#cb74-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">raterSubsetWords =</span> <span class="cn">NULL</span>,</span>
<span id="cb74-41"><a href="#cb74-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">rater =</span> <span class="cn">FALSE</span></span>
<span id="cb74-42"><a href="#cb74-42" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb74-43"><a href="#cb74-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-44"><a href="#cb74-44" aria-hidden="true" tabindex="-1"></a>    <span class="co">#&gt; questionnaire</span></span>
<span id="cb74-45"><a href="#cb74-45" aria-hidden="true" tabindex="-1"></a>  questionnaire_clean <span class="ot">&lt;-</span></span>
<span id="cb74-46"><a href="#cb74-46" aria-hidden="true" tabindex="-1"></a>    questionnaire[<span class="sc">!</span>questionnaire<span class="sc">$</span>PROLIFIC_PID <span class="sc">%in%</span> vec_delete,]</span>
<span id="cb74-47"><a href="#cb74-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-48"><a href="#cb74-48" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>23 CAMs are removed from the data set, which results in 11.98 % loss of data</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/delete%20CAMs-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "create_wordlist - use raw words"
[1] 0
[1] 5577
[1] "temporarily suffixes are added, because not all words have been summarized"
processing 169 CAMs... 
[1] "== participantCAM in drawnCAM"</code></pre>
</div>
</div>
</section>
<section id="aggregate-cams" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="aggregate-cams"><span class="header-section-number">7.4</span> aggregate CAMs</h2>
<p>this is needed for MultilayerExtraction.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>sel_ids <span class="ot">&lt;-</span> <span class="fu">unique</span>(CAMfiles_clean[[<span class="dv">1</span>]]<span class="sc">$</span>participantCAM)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>CAMaggregated_clean <span class="ot">&lt;-</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate_CAMs</span>(<span class="at">dat_merged =</span> CAMfiles_clean[[<span class="dv">3</span>]],</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">dat_nodes =</span> CAMfiles_clean[[<span class="dv">1</span>]],</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">ids_CAMs =</span> sel_ids)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "aggregate_CAMs: using participant CAM ids"
processing 169 CAMs... 
[1] "== participantCAM in drawnCAM"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>CAMaggregated_clean[[<span class="dv">1</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                           Akzeptanz eines neuen Materialsystems
Akzeptanz eines neuen Materialsystems                                        169
Energie   speichernd                                                          27
wartungsintensiv                                                              63
aktive Formänderung durch Umwelteinwirkung                                    44
energieeffizient                                                              45
                                           Energie   speichernd
Akzeptanz eines neuen Materialsystems                        27
Energie   speichernd                                        169
wartungsintensiv                                              1
aktive Formänderung durch Umwelteinwirkung                    1
energieeffizient                                             59
                                           wartungsintensiv
Akzeptanz eines neuen Materialsystems                    63
Energie   speichernd                                      1
wartungsintensiv                                        169
aktive Formänderung durch Umwelteinwirkung                4
energieeffizient                                          4
                                           aktive Formänderung durch Umwelteinwirkung
Akzeptanz eines neuen Materialsystems                                              44
Energie   speichernd                                                                1
wartungsintensiv                                                                    4
aktive Formänderung durch Umwelteinwirkung                                        169
energieeffizient                                                                    1
                                           energieeffizient
Akzeptanz eines neuen Materialsystems                    45
Energie   speichernd                                     59
wartungsintensiv                                          4
aktive Formänderung durch Umwelteinwirkung                1
energieeffizient                                        169</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="do">## check for symmetry</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">colSums</span>(CAMaggregated_clean[[<span class="dv">5</span>]][[<span class="dv">1</span>]]) <span class="sc">==</span> <span class="fu">rowSums</span>(CAMaggregated_clean[[<span class="dv">5</span>]][[<span class="dv">1</span>]]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="do">## test first concept of first CAM</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(CAMaggregated_clean[[<span class="dv">5</span>]][[<span class="dv">1</span>]])[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Akzeptanz eines neuen Materialsystems"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(CAMaggregated_clean[[<span class="dv">5</span>]][[<span class="dv">1</span>]])[CAMaggregated_clean[[<span class="dv">5</span>]][[<span class="dv">1</span>]][<span class="dv">1</span>, ] <span class="sc">&gt;=</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "nachhaltig"            "intelligent"           "lebensähnlich"        
[4] "Energie   generierend" "technologisch"        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(CAMaggregated_clean[[<span class="dv">5</span>]][[<span class="dv">1</span>]])[CAMaggregated_clean[[<span class="dv">5</span>]][[<span class="dv">1</span>]][<span class="dv">1</span>, ] <span class="sc">&gt;=</span> <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "nachhaltig"            "intelligent"           "lebensähnlich"        
[4] "Energie   generierend" "technologisch"        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">make_ego_graph</span>(CAMdrawn_clean[[<span class="dv">1</span>]], <span class="at">order =</span> <span class="dv">1</span>, <span class="dv">1</span>)[[<span class="dv">1</span>]],</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">edge.arrow.size =</span> .<span class="dv">7</span>,</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">layout =</span> layout_nicely,</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.frame.color =</span> <span class="st">"black"</span>,</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">asp =</span> .<span class="dv">5</span>,</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">margin =</span> <span class="sc">-</span><span class="fl">0.1</span>,</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.size =</span> <span class="dv">10</span>,</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.label.cex =</span> .<span class="dv">9</span>,</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> networkIndicators<span class="sc">$</span>CAM_ID[i]</span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01_dataPreperation_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="do">## adjacency matrix (Aij = 1 when nodes i and j are connected and Aij = 0 otherwise)</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>CAMaggregated_clean_onlyOnes <span class="ot">&lt;-</span> CAMaggregated_clean[[<span class="dv">5</span>]]</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(CAMaggregated_clean_onlyOnes)){</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  CAMaggregated_clean_onlyOnes[[i]][CAMaggregated_clean_onlyOnes[[i]] <span class="sc">&gt;=</span> <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="save-all-final-files" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> save all final files</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"outputs/01_dataPreperation/final"</span>)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(vec_delete) <span class="sc">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">all</span>(questionnaire_clean<span class="sc">$</span>PROLIFIC_PID <span class="sc">==</span> networkIndicators_clean<span class="sc">$</span>participantCAM) <span class="sc">&amp;</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">all</span>(questionnaire_clean<span class="sc">$</span>PROLIFIC_PID <span class="sc">==</span> <span class="fu">unique</span>(CAMfiles_clean[[<span class="dv">1</span>]]<span class="sc">$</span>participantCAM))) {</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># save questionnaire</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>    <span class="do">## save as .xlsx file</span></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>    xlsx<span class="sc">::</span><span class="fu">write.xlsx2</span>(<span class="at">x =</span> questionnaire_clean, <span class="at">file =</span> <span class="st">"questionnaire.xlsx"</span>)</span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>    <span class="do">## save as R object</span></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">saveRDS</span>(questionnaire_clean, <span class="at">file =</span> <span class="st">"questionnaire.rds"</span>)</span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># save network indicators combined and clean</span></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a>    <span class="do">## save as .xlsx file</span></span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a>    xlsx<span class="sc">::</span><span class="fu">write.xlsx2</span>(<span class="at">x =</span> networkIndicators_clean, <span class="at">file =</span> <span class="st">"networkIndicators.xlsx"</span>)</span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a>    <span class="do">## save as R object</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">saveRDS</span>(networkIndicators_clean, <span class="at">file =</span> <span class="st">"networkIndicators.rds"</span>)</span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># save CAMfiles</span></span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a>    <span class="do">## save as R object</span></span>
<span id="cb91-20"><a href="#cb91-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">saveRDS</span>(CAMfiles_clean, <span class="at">file =</span> <span class="st">"CAMfiles.rds"</span>)</span>
<span id="cb91-21"><a href="#cb91-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-22"><a href="#cb91-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># save drawn CAMs</span></span>
<span id="cb91-23"><a href="#cb91-23" aria-hidden="true" tabindex="-1"></a>    <span class="do">## save as R object</span></span>
<span id="cb91-24"><a href="#cb91-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">saveRDS</span>(CAMdrawn_clean, <span class="at">file =</span> <span class="st">"CAMdrawn.rds"</span>)</span>
<span id="cb91-25"><a href="#cb91-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-26"><a href="#cb91-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># save wordlist</span></span>
<span id="cb91-27"><a href="#cb91-27" aria-hidden="true" tabindex="-1"></a>    <span class="do">## save as .xlsx file</span></span>
<span id="cb91-28"><a href="#cb91-28" aria-hidden="true" tabindex="-1"></a>    xlsx<span class="sc">::</span><span class="fu">write.xlsx2</span>(<span class="at">x =</span> CAMwordlist_clean, <span class="at">file =</span> <span class="st">"CAMwordlist.xlsx"</span>)</span>
<span id="cb91-29"><a href="#cb91-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-30"><a href="#cb91-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># save aggregated CAMs</span></span>
<span id="cb91-31"><a href="#cb91-31" aria-hidden="true" tabindex="-1"></a>    <span class="do">## save as R object</span></span>
<span id="cb91-32"><a href="#cb91-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">saveRDS</span>(CAMaggregated_clean, <span class="at">file =</span> <span class="st">"CAMaggregated.rds"</span>)</span>
<span id="cb91-33"><a href="#cb91-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-34"><a href="#cb91-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># save adjacency matrix of aggregated CAM as CSV</span></span>
<span id="cb91-35"><a href="#cb91-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">write.table</span>(CAMaggregated_clean[[<span class="dv">1</span>]], <span class="at">file =</span> <span class="st">"CAMaggregated_adj_matrix.csv"</span>,</span>
<span id="cb91-36"><a href="#cb91-36" aria-hidden="true" tabindex="-1"></a>              <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">col.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb91-37"><a href="#cb91-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-38"><a href="#cb91-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># export list of single-layer adjacency matrices to MATLAB for use with GenLouvain</span></span>
<span id="cb91-39"><a href="#cb91-39" aria-hidden="true" tabindex="-1"></a>    multigraph_adj_matrices_list <span class="ot">&lt;-</span> CAMaggregated_clean[[<span class="dv">5</span>]]</span>
<span id="cb91-40"><a href="#cb91-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-41"><a href="#cb91-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># R.matlab allows names with only &lt;32 characters</span></span>
<span id="cb91-42"><a href="#cb91-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(multigraph_adj_matrices_list) <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">names</span>(multigraph_adj_matrices_list), <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">30</span>)</span>
<span id="cb91-43"><a href="#cb91-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">writeMat</span>(<span class="at">con =</span> <span class="st">"CAMaggregated_adj_matrices.mat"</span>, <span class="at">multigraph_adj_matrices_list =</span> multigraph_adj_matrices_list)</span>
<span id="cb91-44"><a href="#cb91-44" aria-hidden="true" tabindex="-1"></a>    multigraph_adj_matrices_list <span class="ot">&lt;-</span> CAMaggregated_clean_onlyOnes</span>
<span id="cb91-45"><a href="#cb91-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-46"><a href="#cb91-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># R.matlab allows names with only &lt;32 characters</span></span>
<span id="cb91-47"><a href="#cb91-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(multigraph_adj_matrices_list) <span class="ot">&lt;-</span> <span class="fu">substr</span>(<span class="fu">names</span>(multigraph_adj_matrices_list), <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">30</span>)</span>
<span id="cb91-48"><a href="#cb91-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">writeMat</span>(<span class="at">con =</span> <span class="st">"CAMaggregated_adj_matrices_onlyOnes.mat"</span>, <span class="at">multigraph_adj_matrices_list =</span> multigraph_adj_matrices_list)</span>
<span id="cb91-49"><a href="#cb91-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-50"><a href="#cb91-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"clean data sets have been sucessfully saved"</span>)</span>
<span id="cb91-51"><a href="#cb91-51" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb91-52"><a href="#cb91-52" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>clean data sets have been sucessfully saved</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>